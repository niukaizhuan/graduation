<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ËßÜÈ¢ë‰∏ä‰º†ÊµãËØï</title>
    <link rel="stylesheet" href="../video/css/video.css">
    <script type="text/javascript" src="../public/common.js"></script>
</head>
<body>
<div class="layout-body" id="videoInfo" v-cloak>
    <layout-header></layout-header>
    <div id="wrap">
        <layout-sider></layout-sider>
        <div class="layout-main">
            <!-- Â§öÊù°‰ª∂Êü•ËØ¢ -->
            <div class="qry">
                <div class="first">
                    <span class="juinline">
                        <el-input class="select_input" type="text" placeholder="ÊêúÁ¥¢ËßÜÈ¢ë"
                                  v-model="sVideoInfo.title" size="medium"></el-input>
                    </span>
                </div>
                <div class="butLeft">
                    <i-button type="primary" size="large" shape="circle" @click = "upload()">ÈÄâÊã©Êñá‰ª∂</i-button>
                </div>
                <div class="butRight">
                    <i-button type="primary" icon="ios-search" @click="filter">ÊêúÁ¥¢</i-button>
                    <i-button @click="clearSVideoInfo">Ê∏ÖÁ©∫</i-button>
                </div>
            </div>

            <!-- ExcelÊñá‰ª∂‰∏ä‰º†Ê®°ÊÄÅÊ°Ü -->
            <Modal v-model="openUploadModal" title="ËØ∑‰∏ä‰º†Êñá‰ª∂" :mask-closable="false"
                   @on-ok="submitTextList()"
                   @on-cancel="openUploadModal=false">
                <div>
                    <center>
                        <p>ÂèñÊ∂àÊó∂ÔºåËøòË¶ÅÊ∏ÖÈô§Êñá‰ª∂‰ø°ÊÅØ</p>
                        <el-upload class="avatar-uploader el-upload--text"
                                   :show-file-list="true"
                                   :format="['mp4','wmv','avi','rmvb']"
                                   :before-upload="beforeUploadVideo"
                                   :on-progress="uploadVideoProcess"

                                   :on-exceed="handleExceed"
                                   :on-change="handleChangeText"
                                   :on-remove="handleRemoveText"
                                   :before-remove="beforeRemoveText"
                                   :file-list="textFileList">
                            <video v-if="this.uploadUrl !='' && !videoFlag"
                                 class="avatar video-avatar"
                                controls="controls">ÊÇ®ÁöÑÊµèËßàÂô®‰∏çÊîØÊåÅËßÜÈ¢ëÊí≠Êîæ</video>
                            <i v-else-if="this.uploadUrl =='' && !videoFlag"
                                   class="el-icon-plus avatar-uploader-icon"></i>
                                <el-progress v-if="videoFlag == true"
                                             type="circle"
                                             :percentage="videoUploadPercent"
                                             style="margin-top:30px;"></el-progress>
                                <el-button class="video-btn"
                                           slot="trigger"
                                           size="small"
                                           v-if="isShowUploadVideo"
                                           type="primary">ÈÄâÂèñÊñá‰ª∂</el-button>
                        </el-upload>
                        <P v-if="isShowUploadVideo"
                           class="text">ËØ∑‰øùËØÅËßÜÈ¢ëÊ†ºÂºèÊ≠£Á°ÆÔºå‰∏î‰∏çË∂ÖËøá20M
                        </P>
                        <p>ËßÜÈ¢ëÊèèËø∞
                            <el-input class="input" type="textarea" maxlength="2000"
                                      show-word-limit
                                      :autosize="{minRows: 2,maxRows: 4}"
                                      v-model.trim="videoInfo.description"/>
                        </p>

                    </center>

                </div>
            </Modal>

            <div>
                <div class="row clearfix">
                    <div class="col-md-12 text-center">
                        <hr>
                        <canvas id="canvasBarrage"></canvas>
                        <video id="videoBarrage" :src="url" v-model="videoInfo.url" controls="controls"></video>
                        <input type="color" style="display: none">
                        <div class="row clearfix">
                            <div class="col-xs-12 col-md-8 col-md-offset-2 text-center">
                                <div class="input-group">
                        <span class="input-group-addon"
                              :style="'font-weight: bold; background-color: ' + reverseColor + '; color: ' + nowColor">
                            ÂºπÂπïÈ¢úËâ≤
                        </span>
                        <span class="input-group-btn">
                            <el-select v-model="barrageInfo.color" class="select_input" title="ÂºπÂπïÈ¢úËâ≤"
                                       filterable clearable size="medium">
                                    <el-option
                                            v-for="(c, key) in colors"
                                            :value="key" :key="key"
                                            :label="key">{{key}}
                                    </el-option>
                            </el-select>
                        </span>
                        <el-input class="select_input" type="text" placeholder="ÂºπÂπïÂÜÖÂÆπ" @keyup.enter="sendBarrage"
                                  filterable clearable  v-model="barrageInfo.content" minlength="1" maxlength="250"></el-input>
                        <span class="input-group-btn">
                            <el-select v-model="barrageInfo.position" class="select_input" title="ÂºπÂπï‰ΩçÁΩÆ"
                                       filterable clearable size="medium">
                                    <el-option
                                            v-for="(c, key) in positions"
                                            :value="key" :key="key"
                                            :label="key">{{key}}
                                    </el-option>
                            </el-select>
                        </span>
                        <span class="input-group-btn">
                            <i-button @click="sendBarrage">ÂèëÈÄÅ</i-button>
                        </span>
                                </div>
                                <p :class="['text-center', 'alert', barrageMsg === 'ÂèëÈÄÅÊàêÂäü' ? 'alert-success' : 'alert-danger']"
                                   v-if="barrageMsg.length > 0">
                                    {{barrageMsg}}
                                </p>
                            </div>
                        </div>
                        <br>
                    </div>
                </div>

                <div class="row clearfix">
                    <div class="col-sm-4 text-right">
                        <i-button :class="['btn', 'btn-primary', 'btn-lg', liked ? 'disabled' : '']" @click="getlike">
                            {{liked ? '(^œâ^) ËµûËøáÂï¶ÔºÅ' : '(‡πë‚Ä¢ÃÄ„ÖÇ‚Ä¢ÃÅ)Ÿà‚úß ËµûÔºÅ'}}
                        </i-button>
                    </div>
                    <div class="col-sm-6">
                        <div class="row clearfix">
                            <div class="col-sm-4">
                                <p>
                                    Êí≠ÊîæÈáèÔºö{{videoInfo.countPlay + 1}}
                                </p>
                                <p>
                                    ÁÇπËµûÈáèÔºö{{videoInfo.countLike}}
                                </p>
                            </div>
                            <div class="col-sm-8">
                                <p>
                                    ‰∏ä‰º†Êó∂Èó¥Ôºö{{videoInfo.uploadTime.toLocaleString()}}
                                </p>
                                <p>
                                    ‰∏ä‰º†Áî®Êà∑Ôºö{{videoInfo.uploadUsername}}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <hr>

                <div class="row clearfix">
                    <div class="col-md-8 col-md-offset-2">
                        <div class="row clearfix">
                            <div class="col-md-12">
                                <h2>ËßÜÈ¢ëÁÆÄ‰ªã</h2>
                                <blockquote>
                                    <p style="overflow-wrap: break-word">{{videoInfo.description}}</p>
                                </blockquote>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>

                <div class="row clearfix">
                    <div class="col-md-8 col-md-offset-2">
                        <div class="row clearfix">
                            <div class="col-md-12">
                                <h2>ËØÑËÆ∫</h2>
                                <el-input class="input" type="textarea" v-model="commentInfo.content" placeholder="ËØÑËÆ∫ÂÜÖÂÆπ"
                                          maxlength="4000" :autosize="{minRows: 2,maxRows: 4}"
                                          show-word-limit></el-input>
                                <p :class="['text-center', 'alert', commentMsg === 'ÂèëÈÄÅÊàêÂäü' ? 'alert-success' : 'alert-danger']"
                                   v-if="commentMsg.length > 0">
                                    {{commentMsg}}
                                </p>
                                <i-button @click="getsendComment">ÂèëÈÄÅ</i-button>
                                <br>
                            </div>
                        </div>
                    </div>
                </div>

                <hr>
                <div class="row clearfix">
                    <div class="col-md-8 col-md-offset-2">
                        <div class="row clearfix">
                            <div class="col-md-12">
                                <h2>ËØÑËÆ∫Âå∫</h2>
                                <br>
                            </div>
                        </div>
                        <template >
                            <div class="row clearfix">
                                <div class="col-md-12">
                                    <template v-for="(comment, idx) in comments">
                                        <div class="row clearfix comment">
                                            <div class="col-xs-4 username">{{comment.userName}}  {{comment.sendTime}}</div>
                                            <div class="col-xs-2 col-xs-offset-1 like text-right">
                                    			<span @click="likeComment" 
	                                    			:id="'comment-' + idx" 
	                                    			style="cursor: pointer"  
	                                    			v-model="commentInfo.countLike">
                                        				üëç {{comment.countLike}}
                                    			</span>
                                                <span :id="'comment-liked-' + idx" style="display: none; cursor: default">
                                        				üëç {{comment.countLike}}
                                   				</span>
                                   				<span v-text="comment.content"></span>
                                   				<span v-if="comment.userId === 19" class="col-xs-12 text-right">
	                                                <button class="btn btn-danger" @click="deleteComment"
	                                                        :id="'comment-delete-' + idx">Âà†Èô§</button>
                                            	</span>
                                            </div>
                                        </div>
                                    </template>
                                    <div class="row clearfix">
                                        <br><br>
                                        <div class="div-inline-right">
						                    <!-- current:ÂΩìÂâçÈ°µÁ†Å  total:Êï∞ÊçÆÊÄªÊï∞  page-size:ÊØèÈ°µÊù°Êï∞-->
						                    <Page :current="pageNum" :total="totalNum" :page-size="pageSize"
						                          @on-change="onPageChange" @on-page-size-change="onPageSizeChange"
						                          show-total show-elevator show-sizer></Page>
						                </div>
                                </div>
                            </div>
                        </template>
                        <template>
                            <div class="row clearfix">
                                <div class="col-md-12 text-center">
                                    <h1 class="text-center">Ê≤°ÊúâÊõ¥Â§öËØÑËÆ∫</h1>
                                    <br>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>


            </div>
        <div style="clear:both"></div>
    </div>
    <layout-footer></layout-footer>
</div>
<script type="text/javascript" src="../video/js/videoTest.js"></script>
</body>
</html>